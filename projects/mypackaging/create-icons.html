<!DOCTYPE html>
<html>
<head>
    <title>Create PWA Icons from Logo</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        canvas { border: 1px solid #ddd; margin: 10px; }
        button { background: #004d24; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin: 5px; }
        .icon-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 20px 0; }
        .icon-item { text-align: center; padding: 10px; border: 1px solid #eee; border-radius: 8px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ¨ Create PWA Icons from Your Logo</h1>
        <p>This tool will help you create properly sized icons for your PWA from your logo.png file.</p>
        
        <div>
            <h3>Step 1: Load Your Logo</h3>
            <input type="file" id="logoInput" accept="image/*">
            <p><small>Select your logo.png file from public folder</small></p>
        </div>

        <div id="previewSection" style="display: none;">
            <h3>Step 2: Preview Original</h3>
            <canvas id="originalCanvas"></canvas>
            <p id="originalInfo"></p>
        </div>

        <div id="iconsSection" style="display: none;">
            <h3>Step 3: Generated Icons</h3>
            <button onclick="generateIcons()">Generate All Icons</button>
            <div class="icon-grid" id="iconGrid"></div>
        </div>

        <div id="downloadSection" style="display: none;">
            <h3>Step 4: Download Icons</h3>
            <p>Right-click each icon below and "Save image as..." with the specified filename:</p>
            <div id="downloadLinks"></div>
        </div>
    </div>

    <script>
        const logoInput = document.getElementById('logoInput');
        const originalCanvas = document.getElementById('originalCanvas');
        const originalCtx = originalCanvas.getContext('2d');
        
        const iconSizes = [
            { size: 192, name: 'logo192.png', desc: 'Standard PWA icon' },
            { size: 512, name: 'logo512.png', desc: 'Large PWA icon' },
            { size: 144, name: 'logo144.png', desc: 'Medium icon' },
            { size: 96, name: 'logo96.png', desc: 'Small icon' },
            { size: 72, name: 'logo72.png', desc: 'Extra small icon' }
        ];

        logoInput.addEventListener('change', loadLogo);

        function loadLogo(event) {
            const file = event.target.files[0];
            if (!file) return;

            const img = new Image();
            img.onload = function() {
                // Show original
                originalCanvas.width = Math.min(img.width, 300);
                originalCanvas.height = Math.min(img.height, 300);
                
                const scale = Math.min(originalCanvas.width / img.width, originalCanvas.height / img.height);
                const x = (originalCanvas.width - img.width * scale) / 2;
                const y = (originalCanvas.height - img.height * scale) / 2;
                
                originalCtx.clearRect(0, 0, originalCanvas.width, originalCanvas.height);
                originalCtx.drawImage(img, x, y, img.width * scale, img.height * scale);
                
                document.getElementById('originalInfo').textContent = `Original: ${img.width}x${img.height}px`;
                document.getElementById('previewSection').style.display = 'block';
                document.getElementById('iconsSection').style.display = 'block';
                
                // Store image for later use
                window.originalImage = img;
            };
            
            const reader = new FileReader();
            reader.onload = function(e) {
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function generateIcons() {
            if (!window.originalImage) return;

            const iconGrid = document.getElementById('iconGrid');
            const downloadLinks = document.getElementById('downloadLinks');
            iconGrid.innerHTML = '';
            downloadLinks.innerHTML = '';

            iconSizes.forEach(iconInfo => {
                // Create canvas for this size
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = iconInfo.size;
                canvas.height = iconInfo.size;

                // Draw image scaled to fit
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, iconInfo.size, iconInfo.size);
                
                const scale = Math.min(iconInfo.size / window.originalImage.width, iconInfo.size / window.originalImage.height);
                const x = (iconInfo.size - window.originalImage.width * scale) / 2;
                const y = (iconInfo.size - window.originalImage.height * scale) / 2;
                
                ctx.drawImage(window.originalImage, x, y, window.originalImage.width * scale, window.originalImage.height * scale);

                // Add to grid
                const iconItem = document.createElement('div');
                iconItem.className = 'icon-item';
                iconItem.innerHTML = `
                    <canvas width="${iconInfo.size}" height="${iconInfo.size}" style="width: 100px; height: 100px;"></canvas>
                    <p><strong>${iconInfo.name}</strong><br>${iconInfo.size}x${iconInfo.size}px<br><small>${iconInfo.desc}</small></p>
                `;
                
                const displayCanvas = iconItem.querySelector('canvas');
                const displayCtx = displayCanvas.getContext('2d');
                displayCtx.drawImage(canvas, 0, 0);
                
                iconGrid.appendChild(iconItem);

                // Add download link
                canvas.toBlob(blob => {
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = iconInfo.name;
                    link.textContent = `Download ${iconInfo.name}`;
                    link.style.display = 'block';
                    link.style.margin = '5px 0';
                    link.style.padding = '10px';
                    link.style.background = '#f8f9fa';
                    link.style.textDecoration = 'none';
                    link.style.borderRadius = '4px';
                    downloadLinks.appendChild(link);
                });
            });

            document.getElementById('downloadSection').style.display = 'block';
        }
    </script>
</body>
</html>